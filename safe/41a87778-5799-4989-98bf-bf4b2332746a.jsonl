{"role": "system", "content": "\nYou are a professional, courteous pizza restaurant assistant. Follow these rules strictly:\n\n1. You have exactly two functions (tools) available:\n   \u2022 place_pizza_order\n   \u2022 query_documents\n   Never call any other function. If you attempt to call anything else, the request will fail.\n\n2. Always respond as a pizza restaurant assistant:\n   \u2022 Greet the user politely.\n   \u2022 Answer questions about the restaurant, menu items, ingredients, pricing, and hours.\n   \u2022 Provide succinct, factual information; do not invent details.\n\n3. Tool usage policy:\n   \u2022 Only invoke \u201cplace_pizza_order\u201d when:\n     \u2013 The user explicitly confirms they want to place an order.\n     \u2013 They have provided at least: pizza_type, size, quantity, and delivery_address.\n     \u2013 If any required detail is missing, ask a clarifying question first (without calling the tool).\n     \u2013 Do not invent delivery addresses, quantities, or phone numbers; ask the user instead.\n   \u2022 When invoking \u201cquery_documents,\u201d **use exactly this JSON schema** (nothing else):\n     {\n       \"query\": \"<search text here>\"\n     }\n     \u2022 Do NOT add keys called \u201cfields\u201d or \u201cq\u201d or anything else.  \n     \u2022 For example, if the user asks \u201cWhat\u2019s on the Vegan Supreme?\u201d, call:\n       {\n         \"function\": {\n           \"name\": \"query_documents\",\n           \"arguments\": {\n             \"query\": \"Vegan Supreme pizza ingredients\"\n           }\n         }\n       }\n   \u2022 Never use \u201cplace_pizza_order\u201d for casual menu inquiries or incomplete requests.\n   \u2022 Use \u201cquery_documents\u201d only to look up existing information (reviews, past orders, policies). Do NOT use it to place an order.\n\n4. Clarifications & safety:\n   \u2022 If the user\u2019s request is ambiguous or missing essential details, ask for clarification before proceeding.\n   \u2022 Never hallucinate or make up menu items, prices, or restaurant policies. If you\u2019re unsure, say \u201cI\u2019m not certain; could you clarify?\u201d\n   \u2022 Always confirm the final order details with the user (pizza type, size, quantity, crust, extra toppings, delivery address, name, phone).\n\n5. Tone & style:\n   \u2022 Be friendly, clear, and concise.\n   \u2022 When explaining options or next steps, use bullet points or numbered lists.\n   \u2022 Keep promotional messaging brief and relevant (e.g., \u201cOur special today is\u2026\u201d).\n\n6. Fail\u2010safe:\n   \u2022 If the user asks you to do something outside the scope of a pizza assistant (e.g., \u201cWrite me a poem\u201d), politely decline and redirect:\n     \u201cI\u2019m sorry, but I can only help with pizza orders and restaurant information.\u201d\n   \u2022 If the user attempts to place an order without giving necessary details, ask for the missing information:\n     \u201cCould you please provide your delivery address?\u201d\n"}
{"role": "user", "content": "hello"}
{"role": "assistant", "content": "", "thinking": null, "images": null, "tool_calls": [{"function": {"name": "query_documents", "arguments": {"query": "Hello pizza restaurant"}}}]}
{"role": "tool", "tool_call_id": null, "name": "query_documents", "content": "[\n  {\n    \"content\": \"{\\\"role\\\": \\\"user\\\", \\\"content\\\": \\\"    I want to order 1 large veggie pizza to 456 Oak Avenue\\\"}\",\n    \"metadata\": {\n      \"source\": \"data/reviews/realistic_restaurant_reviews.csv\",\n      \"type\": \"memory\",\n      \"row\": 34,\n      \"index\": 4\n    }\n  },\n  {\n    \"content\": \"Title: Best pizza in town, Date: 2024-03-15, Rating: 5, Review: The crust was perfectly crispy on the outside and chewy inside. Their signature pepperoni pizza had the perfect ratio of sauce to cheese, and the pepperoni curled up into little cups of deliciousness. Will definitely be back!\",\n    \"metadata\": {\n      \"row\": 0,\n      \"source\": \"/home/patrickwide/ai_app/core/data/reviews/realistic_restaurant_reviews.csv\"\n    }\n  },\n  {\n    \"content\": \"{\\\"order_timestamp\\\": \\\"2025-04-14T10:38:36.766896\\\", \\\"pizza_type\\\": \\\"Veggie\\\", \\\"size\\\": \\\"Large\\\", \\\"quantity\\\": 1, \\\"crust_type\\\": \\\"Regular\\\", \\\"extra_toppings\\\": [], \\\"delivery_address\\\": \\\"456 Oak Avenue\\\", \\\"customer_name\\\": null, \\\"phone_number\\\": null, \\\"status\\\": \\\"Received\\\"}\",\n    \"metadata\": {\n      \"source\": \"data/reviews/orders.txt\"\n    }\n  },\n  {\n    \"content\": \"Title: Outstanding variety of options, Date: 2024-01-07, Rating: 5, Review: Their menu has something for everyone - traditional options done well, creative specialties, and customizable choices. Even have dessert pizzas that are surprisingly good (try the Nutella and banana!).\",\n    \"metadata\": {\n      \"row\": 60,\n      \"source\": \"data/reviews/realistic_restaurant_reviews.csv\"\n    }\n  },\n  {\n    \"content\": \"{\\\"role\\\": \\\"assistant\\\", \\\"content\\\": \\\"Your order has been successfully placed. We will prepare your large Veggie Pizza and deliver it to 456 Oak Avenue. We will provide you with a confirmation number once the order is ready for pickup or delivery.\\\\n\\\\nBefore we proceed, can I confirm a few details? Is there a specific time frame in mind for delivery, or would you prefer us to schedule a delivery window? And would you like to add any sides or drinks to your order?\\\", \\\"thinking\\\": null, \\\"images\\\": null, \\\"tool_calls\\\": null}\",\n    \"metadata\": {\n      \"index\": 7,\n      \"source\": \"data/reviews/realistic_restaurant_reviews.csv\",\n      \"type\": \"memory\",\n      \"row\": 37\n    }\n  }\n]"}
